---
title: 'hexo yilia添加相册'
comments: true
date: 2018-03-04 00:30:00
tags: [hexo,yilia,hexo主题]
categories: 折腾记录
---
**最终效果：**[https://er567.cn/photos](https://er567.cn/photos/) 

**参考连接：**[http://lawlite.me/](http://lawlite.me/2017/04/13/Hexo-Github实现相册功能/) 

有什么问题可以在下面留言评论或者左边的联系方式问我

下面大概说一下实现步骤

### 1.创建图床

你可以用你自己的服务器搭一个，也可以使用七牛云，最方便当然还是直接在git上建一个仓库用来存放图片，缺点就是一次性添加图片过多的时候上传会有点慢。

### 2.压缩图片并整理图片信息 

这一步需要读取文件，你可以用nodejs,python,php等等都行。主题的作者是用的nodejs,我参考使用的是python。大概实现的功能就是读取原图，压缩图片，将原图和压缩过的图片的信息都整理好存到一个json文件中以便于hexo 主题模板渲染页面使用。

### 3.在blog目录中渲染相册页面

拿到了图片信息json文件后需要编辑相册页面模板，你也可以自定义一些样式。在source目录中创建photos文件夹，在里面编辑ejs,js,css

### 4.部署

以上这些都弄完没问题之后就可以部署上去了(每次更新图片需要跑一下脚本更新json)
<!--more-->
### 遇到的问题

在运行python脚本时候你可能会没有环境，简单，对照官网安装配置环境就好了。

安装PIL => pip install Pillow //图像处理库 

然后还遇到里字符编码问题，保存的json文件中无法存中文。

因为Python2中默认的编码方式一般是GBK,需要在处理的中文字符串后.decode('gbk') //将gbk编码的字符串转换成unicode编码

**图片无法显示：**

1.图片后缀是否保存正确 
2.控制台查看引用的路径是否正确 
3.图片是否已经成功上传到，并在仓库设置开启git pages